{% include 'admin_logged_in.html' %}

{% block body %}

<button type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#myModal">Add user</button> 

	<div class="starter-template">
		<table class="table table-bordered table-hover table-striped">
			<thead>
				<tr class="info">
					
					<td><b>Id</b></td>
					<td><b>Username</b></td>
					<td><b>password</b></td>
					<td><b>Dept_id</b></td>
					<td><b>User_id</b></td>
					<td><b>Action</b></td>
				</tr>
			</thead>
		<tbody>
		{% if users %}
			{% for row in users %}
				<tr>
					<td>{{ row.0 }}</td>
					<td>{{ row.1 }}</td>
					<td>{{ row.2 }}</td>
					<td>{{ row.3 }}</td>
					<td>{{ row.4 }}</td>
					<td>

 <a href="#" class="btn btn-warning btn-xs" data-toggle="modal" data-target="#modalEdit{{ row.0 }}">Edit</a>
 <a href="/delete/{{ row.0 }}" class="btn btn-danger btn-xs" onclick="return confirm('are you sure?')">Delete</a>

</td>
</tr>
			
		

<div id="modalEdit{{ row.0 }}" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Edit Data</h4>
			</div>
		<div class="modal-body">
			<form action="{{ url_for('update') }}" method="POST">
				<div class="form-group">
					<label>Username</label>
					<input type="hidden" name="id" value="{{ row.0 }}">
					<input type="text" class="form-control" name="username" value="{{ row.1 }}">
				</div>
				<div class="form-group">
					<label>password</label>
					<input type="hidden" name="id" value="{{ row.0 }}">
					<input type="text" class="form-control" name="password" value="{{ row.2 }}">
				</div>
				<div class="form-group">
					<label>Dept_id</label>
					<input type="hidden" name="id" value="{{ row.0 }}">
					<input type="text" class="form-control" name="dept_id" value="{{ row.3 }}">
				</div>
				<div class="form-group">
					<label>User_id</label>
					<input type="hidden" name="id" value="{{ row.0 }}">
					<input type="text" class="form-control" name="user_id" value="{{ row.4 }}">
				</div>
				<div class="form-group">
					<button class="btn btn-warning" type="submit">Update</button>
				</div>
			</form>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		</div>
	</div>
</div>
</div>
<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Add user</h4>
			</div>
			<div class="modal-body">
				<form action="{{ url_for('add_user') }}" method="POST">
					<div class="form-group">
						<label>Username</label>
						<input type="text" class="form-control" name="username">
					</div>
					<div class="form-group">
						<label>Password</label>
						<input type="text" class="form-control" name="password">
					</div>
					<div class="form-group">
						<label>dept_id </label>
						<input type="text" class="form-control" name="dept_id">
					</div>
					<div class="form-group">
						<label> user_id </label>
						<input type="text" class="form-control" name="user_id">
					</div>
					<div class="form-group">
						<button class="btn btn-primary" type="submit">Add</button>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


{% endfor %}
{% endif %}
</tbody>
</table>
</div>
</div>
<div>
{% with messages = get_flashed_messages() %}
    				    	    {% if messages %}
        					{% for message in messages %}
            						<div class="alert alert-info alert-dismissible  " role="alert">
								<span class="close" data-dismiss="alert" aria-label="close">&times;</span>
                						<span>{{ message }}</span>
            						</div>
        					{% endfor %}
    				            {% endif %}
					{% endwith %}
					

</div>



{% endblock %}

  